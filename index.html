<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>QUADRes Greetings</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-3BB0ZSG4EY"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-3BB0ZSG4EY');
    </script>

    <style>
        /* ---------- RESET & BASE ---------- */
        *{margin:0;padding:0;box-sizing:border-box}
        html{font-size:16px;height:100%}
        body{
            width:100vw;height:100vh;height:100dvh;
            overflow:hidden;position:fixed;top:0;left:0;
            background:#1C1B1F url("bg.jpg") center/cover no-repeat scroll;
            display:flex;flex-direction:column;justify-content:center;align-items:center;
            font-family:Roboto,Arial,sans-serif;color:#E6E0E9;text-align:center;
        }
        body::before{
            content:"";position:absolute;inset:0;
            background:linear-gradient(135deg,rgba(28,27,31,.3) 0%,rgba(28,27,31,.5) 50%,rgba(28,27,31,.4) 100%);
            z-index:0;
        }

        /* ---------- CONTENT ---------- */
        .content{
            position:relative;z-index:1;width:100%;min-height:100vh;min-height:100dvh;
            display:flex;flex-direction:column;align-items:center;justify-content:flex-end;padding:25px;
        }

        /* ---------- PARTICLES ---------- */
        .particles-container{position:fixed;inset:0;pointer-events:none;z-index:0;overflow:hidden}
        .particle{
            position:absolute;width:12px;height:12px;opacity:.4;
            animation:float 6s infinite ease-in-out;
        }
        .particle::before{
            content:"";position:absolute;width:8px;height:8px;
            background:linear-gradient(135deg,#D0BCFF,#CCC2DC);
            border-radius:50% 10% 50% 10%;transform:rotate(45deg);top:0;left:2px;
        }
        .particle::after{
            content:"";position:absolute;width:4px;height:4px;
            background:radial-gradient(circle,#F2B8B5,#F9DEDC);border-radius:50%;top:4px;left:4px;
        }
        @keyframes float{
            0%,100%{transform:translateY(0) rotate(0deg);opacity:.2}
            25%{transform:translateY(-15px) rotate(90deg);opacity:.4}
            50%{transform:translateY(-25px) rotate(180deg);opacity:.6}
            75%{transform:translateY(-15px) rotate(270deg);opacity:.4}
        }

        /* ---------- PLAYER CARD ---------- */
        .player-container{
            width:calc(100vw - 32px);max-width:400px;
            background:rgba(230,224,233,.08);backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);
            border:1px solid rgba(208,188,255,.2);border-radius:28px;padding:24px;
            box-shadow:0 6px 16px rgba(0,0,0,.24),0 1px 4px rgba(0,0,0,.12);position:relative;z-index:2;
        }
        .top-section{display:flex;align-items:center;gap:16px;margin-bottom:24px}
        .logo{
            width:90px;
            height:90px;
            flex-shrink: 0;
            object-fit: cover;
            object-position: center;
            border-radius: 50%;
            -webkit-user-drag: none;
            user-select: none;
        }
        @media(max-width:400px){.logo{width:82px;height:82px}}
        @media(max-width:350px){.logo{width:74px;height:74px}}
        .track-info{flex:1;text-align:left}
        .track-title{font-size:22px;font-weight:500;margin-bottom:4px;color:#E6E0E9;line-height:1.2}
        .track-artist{font-size:16px;color:#CAC4D0;font-weight:400;line-height:1.3}

        /* ---------- PROGRESS ---------- */
        .progress-container{margin:2px 0;position:relative}
        .wave-progress-bar{
            width:100%;height:12px;background:rgba(86,80,71,.304);
            border-radius:12px;overflow:hidden;cursor:pointer;box-shadow:inset 0 1px 3px rgba(0,0,0,.12);
        }
        .wave-progress{
            height:100%;width:0%;border-radius:1px;
            background:#ffa200;background-size:300% 100%;
            animation:wave-flow 3s linear infinite;transition:width .1s ease;
        }
        .wave-progress.playing::before{animation-duration:1.5s}
        .wave-progress.playing::after{animation-duration:1s}
        @keyframes wave-flow{0%{background-position:0 0}100%{background-position:300% 0}}
        .time-display{display:flex;justify-content:space-between;font-size:14px;margin-top:12px;color:#CAC4D0;font-family:Roboto Mono,monospace}

        /* ---------- CONTROLS ---------- */
        .controls{display:flex;justify-content:center;align-items:center;gap:16px;margin-top:24px}
        button{
            background:rgba(208,188,255,.12);border:1px solid rgba(208,188,255,.2);
            color:#D0BCFF;font-size:20px;cursor:pointer;border-radius:20px;
            backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px);
            min-width:48px;min-height:48px;display:flex;align-items:center;justify-content:center;
            transition:all .2s cubic-bezier(.2,0,0,1);touch-action:manipulation;-webkit-tap-highlight-color:transparent;
        }
        button:hover{background:rgba(208,188,255,.16);transform:scale(1.02)}
        button:active{transform:scale(.96);background:rgba(208,188,255,.2)}
        .play-btn{min-width:64px;min-height:64px;font-size:28px;color:#fff;border-radius:32px}
        .play-btn.playing{background:linear-gradient(135deg,#ffa200,#ff7b00);border:none;box-shadow:0 3px 12px rgba(255,162,0,.3)}

        /* ---------- SOCIAL SLIDER ---------- */
        .social-container{display:flex;align-items:center;justify-content:center;margin-top:20px;width:100%}
        .social-slider-wrapper{position:relative;width:100%;display:flex;flex-direction:column;align-items:center}
        .social-slider-track{
            width:100%;height:8px;border-radius:10px;position:relative;margin:0 0 15px 0;
            background:linear-gradient(to right,#E4405F 0%,rgba(158,158,158,0) 50%,#1877F2 100%);
            transition:background .3s ease;
        }
        .social-slider{
            width:100%;height:8px;outline:none;border-radius:10px;-webkit-appearance:none;appearance:none;
            cursor:pointer;background:transparent;position:relative;z-index:2;
            -webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;
            -webkit-tap-highlight-color:transparent;-webkit-touch-callout:none;
        }
        .social-slider::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:32px;height:32px;border-radius:50%;background:transparent;border:none;cursor:pointer;position:relative;z-index:5;outline:none}
        .social-slider::-moz-range-thumb{width:32px;height:32px;border-radius:50%;background:transparent;border:none;cursor:pointer;position:relative;z-index:5;outline:none}
        .slider-thumb{
            position:absolute;top:-12px;left:50%;transform:translateX(-50%);
            width:32px;height:32px;border-radius:50%;
            background:linear-gradient(135deg,#ffa200,#ff7b00);
            display:flex;align-items:center;justify-content:center;color:#fff;font-size:14px;
            box-shadow:0 2px 8px rgba(0,0,0,.3);z-index:4;pointer-events:none;
            transition:transform .2s ease,background .3s ease;
        }
        .slider-thumb:hover{transform:translateX(-50%) scale(1.1)}
        .slider-thumb.instagram-mode{background:linear-gradient(45deg,#f09433,#dc2743)}
        .slider-thumb.facebook-mode{background:linear-gradient(45deg,#1877F2,#0d5cbf)}
        .slider-thumb i{transition:transform .3s ease}
        .slider-thumb.instagram-mode i{transform:rotate(-30deg)}
        .slider-thumb.facebook-mode i{transform:rotate(30deg)}
        .social-logos{display:flex;justify-content:space-between;align-items:center;width:100%;padding:0 5px}
        .social-logo{
            width:44px;height:44px;border-radius:50%;display:flex;align-items:center;justify-content:center;
            transition:all .3s ease;opacity:.7;box-shadow:0 2px 8px rgba(0,0,0,.15);
            cursor:pointer;flex-shrink:0;position:relative;
        }
        .social-logo:hover{opacity:1;transform:scale(1.1)}
        .social-logo.active{opacity:1;transform:scale(1.15);box-shadow:0 4px 12px rgba(0,0,0,.25)}
        .social-logo::after{
            content:'Slide to connect';position:absolute;top:-25px;left:50%;
            transform:translateX(-50%);white-space:nowrap;font-size:10px;color:#CAC4D0;opacity:0;transition:opacity .3s ease;
        }
        .social-logo:hover::after{opacity:1}
        .instagram-logo{background:linear-gradient(45deg,#f09433 0%,#e6683c 25%,#dc2743 50%,#cc2366 75%,#bc1888 100%)}
        .facebook-logo{background:#1877F2}
        .social-logo i{color:#fff;font-size:20px}
        .slider-labels{display:flex;justify-content:space-between;width:100%;margin-top:8px;font-size:10px;color:#CAC4D0}

        /* ---------- LIVE COUNTER ---------- */
        .live-viewer-counter{
            position:absolute;top:20px;right:20px;z-index:3;
            background:rgba(230,224,233,.12);backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px);
            border:1px solid rgba(208,188,255,.2);border-radius:20px;padding:8px 16px;
            box-shadow:0 4px 12px rgba(0,0,0,.15);display:flex;align-items:center;gap:8px;cursor:pointer;
        }
        .live-viewer-icon{color:#FFA200;font-size:16px}
        .live-viewer-number{font-size:16px;color:#D0BCFF;font-weight:bold;font-family:Roboto Mono,monospace}

        /* ---------- GIFT BUTTON ---------- */
        .gift-button{
            position:absolute;top:20px;left:20px;z-index:3;
            background:rgba(230,224,233,.12);backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px);
            border:1px solid rgba(208,188,255,.2);border-radius:20px;padding:8px 16px;
            box-shadow:0 4px 12px rgba(0,0,0,.15);display:flex;align-items:center;gap:8px;cursor:pointer;
        }
        .gift-icon{color:#FF6BAC;font-size:16px}

        @media(max-width:400px){
            .live-viewer-counter, .gift-button{top:16px;padding:6px 12px}
            .live-viewer-number{font-size:14px}
        }

        /* ---------- MODALS ---------- */
        .stats-modal, .gift-modal{
            display:none;position:fixed;inset:0;background:rgba(0,0,0,.85);z-index:1000;
            justify-content:center;align-items:center;padding:20px;
        }
        .stats-content, .gift-content{
            background:#1C1B1F;border-radius:24px;padding:30px;width:90%;max-width:400px;
            box-shadow:0 10px 30px rgba(0,0,0,.5);border:1px solid rgba(208,188,255,.2);
            animation:modalFadeIn .3s ease;
        }
        @keyframes modalFadeIn{from{opacity:0;transform:scale(.9)}to{opacity:1;transform:scale(1)}}
        .stats-header, .gift-header{
            display:flex;justify-content:space-between;align-items:center;margin-bottom:24px
        }
        .stats-title, .gift-title{
            font-size:20px;font-weight:600;color:#D0BCFF
        }
        .close-btn{background:none;border:none;color:#CAC4D0;font-size:24px;cursor:pointer}
        .stat-item, .gift-item{
            background:rgba(208,188,255,.08);border-radius:16px;padding:16px;margin-bottom:16px;text-align:left
        }
        .stat-label, .gift-label{
            font-size:14px;color:#CAC4D0;margin-bottom:6px
        }
        .stat-value, .gift-value{
            font-size:24px;font-weight:bold;color:#D0BCFF;font-family:Roboto Mono,monospace
        }
        .gift-link{
            display:block;width:100%;padding:12px;margin-top:16px;
            background:linear-gradient(135deg,#FF6BAC,#FF3E8D);color:white;text-decoration:none;
            border-radius:12px;font-weight:bold;text-align:center;transition:transform .2s;
        }
        .gift-link:hover{transform:scale(1.02)}
        .loading{display:inline-block;width:24px;height:24px;border:3px solid rgba(208,188,255,.3);border-radius:50%;border-top-color:#D0BCFF;animation:spin 1s cubic-bezier(.4,0,.6,1) infinite}
        @keyframes spin{to{transform:rotate(360deg)}}
    </style>
</head>
<body>
    <!-- Live viewer counter (RIGHT) -->
    <div class="live-viewer-counter" id="liveCounterBtn">
        <i class="fas fa-users live-viewer-icon"></i>
        <div class="live-viewer-number" id="liveViewerCount">0</div>
    </div>

    <!-- Gift button (LEFT) -->
    <div class="gift-button" id="giftBtn">
        <i class="fas fa-gift gift-icon"></i>
        <div class="gift-text">Get Gift!</div>
    </div>

    <!-- Stats modal -->
    <div class="stats-modal" id="statsModal">
        <div class="stats-content">
            <div class="stats-header">
                <div class="stats-title">✨ শুভ দুর্গা পূজা ✨</div>
                <button class="close-btn" id="closeStatsModal">&times;</button>
            </div>
            <div class="stat-item">
                <div class="stat-label">Currently Watching</div>
                <div class="stat-value" id="modalLiveCount">0</div>
            </div>
            <div class="stat-item" style="text-align:center;padding:20px 0 0 0;">
                <div class="stat-label">এবারের পূজা হোক আরও আনন্দময়! 🎉</div>
                <div class="stat-label">চলছে ১০% - ১৫% ছাড় ! <br><br></div>
            </div>
        </div>
    </div>

    <!-- Gift modal -->
    <div class="stats-modal gift-modal" id="giftModal">
        <div class="gift-content">
            <div class="gift-header">
                <div class="gift-title">🎁 Special Gift for You!</div>
                <button class="close-btn" id="closeGiftModal">&times;</button>
            </div>
            <div class="gift-item">
                <div class="gift-label">We have a gift for you! 🎁</div>
                <div class="gift-label">Please fill up the Google Form below to claim your exclusive Durga Puja offer!</div>
                <a href="https://example.googleform.com" target="_blank" class="gift-link">👉 Claim Your Gift Now</a>
            </div>
        </div>
    </div>

    <!-- Particles background -->
    <div class="particles-container" id="particles"></div>

    <!-- Main content -->
    <div class="content">
        <div class="player-container">
            <!-- Top section -->
            <div class="top-section">
                <img src="QUADRes main logo with original colour.jpg" alt="Brand Logo" class="logo">
                <div class="track-info">
                    <div class="track-title"><strong>Ovi Shakhary</strong></div>
                    <div class="track-artist">Co-founder of <b>QUADRes</b></div>
                </div>
            </div>

            <!-- Progress -->
            <div class="progress-container">
                <div class="wave-progress-bar" onclick="setProgress(event)">
                    <div class="wave-progress" id="progress"></div>
                </div>
                <div class="time-display">
                    <span id="currentTime">0:00</span>
                    <span id="duration">0:00</span>
                </div>
            </div>

            <!-- Audio -->
            <audio id="audioPlayer" preload="auto">
                <source src="ovi.mp3" type="audio/mpeg">
                Your browser does not support audio playback.
            </audio>

            <!-- Controls -->
            <div class="controls">
                <button onclick="skipBackward()" title="Skip back 10 seconds"><i class="fa-solid fa-backward"></i></button>
                <button onclick="togglePlay()" id="playBtn" class="play-btn"><i class="fa-solid fa-circle-play" id="playIcon"></i></button>
                <button onclick="skipForward()" title="Skip forward 10 seconds"><i class="fa-solid fa-forward"></i></button>
            </div>

            <!-- Social slider -->
            <div class="social-container">
                <div class="social-slider-wrapper">
                    <div class="social-slider-track">
                        <input type="range" min="0" max="100" value="50" class="social-slider" id="socialSlider">
                        <div class="slider-thumb" id="sliderThumb"><i class="fa-solid fa-arrows-left-right"></i></div>
                    </div>
                    <div class="social-logos">
                        <div class="social-logo instagram-logo" id="instaLogo" onclick="openSocialLink('instagram')"><i class="fab fa-instagram"></i></div>
                        <div class="social-logo facebook-logo" id="fbLogo" onclick="openSocialLink('facebook')"><i class="fab fa-facebook-f"></i></div>
                    </div>
                    <div class="slider-labels">
                        <span>Swipe to Instagram</span>
                        <span>Swipe to Facebook</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        /* ---------- DOM SHORTS ---------- */
        const audio = document.getElementById('audioPlayer');
        const playBtn = document.getElementById('playBtn');
        const playIcon = document.getElementById('playIcon');
        const progress = document.getElementById('progress');
        const currentTimeEl = document.getElementById('currentTime');
        const durationEl = document.getElementById('duration');
        const socialSlider = document.getElementById('socialSlider');
        const sliderThumb = document.getElementById('sliderThumb');
        const instaLogo = document.getElementById('instaLogo');
        const fbLogo = document.getElementById('fbLogo');
        const liveViewerCountEl = document.getElementById('liveViewerCount');
        const modalLiveCount = document.getElementById('modalLiveCount');
        const statsModal = document.getElementById('statsModal');
        const closeStatsModal = document.getElementById('closeStatsModal');

        // GIFT MODAL ELEMENTS
        const giftBtn = document.getElementById('giftBtn');
        const giftModal = document.getElementById('giftModal');
        const closeGiftModal = document.getElementById('closeGiftModal');

        /* ---------- STATS ---------- */
        function getLiveViewers(){
            const now = new Date();
            const h = now.getHours();
            const m = now.getMinutes();
            const totalMinutes = h * 60 + m;

            if(totalMinutes >= 120 && totalMinutes < 360) return Math.floor(Math.random() * 3) + 1;
            if(totalMinutes >= 360 && totalMinutes < 720) return Math.floor(Math.random() * 8);
            if(totalMinutes >= 720 && totalMinutes < 960) return Math.floor(Math.random() * 11);
            if(totalMinutes >= 960 && totalMinutes < 1050) return Math.floor(Math.random() * 14) + 7;
            if(totalMinutes >= 1050 && totalMinutes < 1110) return Math.floor(Math.random() * 36) + 15;
            if(totalMinutes >= 1200 && totalMinutes < 1230) return Math.floor(Math.random() * 41) + 50;
            if(totalMinutes >= 1230 && totalMinutes < 1350) return Math.floor(Math.random() * 101) + 100;
            if(totalMinutes >= 1350 || totalMinutes < 30) return Math.floor(Math.random() * 31) + 20;
            if(totalMinutes >= 30 && totalMinutes < 90) return Math.floor(Math.random() * 9) + 7;
            if(totalMinutes >= 90 && totalMinutes < 120) return Math.floor(Math.random() * 7) + 1;
            return 1;
        }

        function updateStats(){
            const now = new Date();
            const totalMinutes = now.getHours() * 60 + now.getMinutes();
            const isPeak = totalMinutes >= 1230 && totalMinutes < 1350;

            const live = getLiveViewers();
            liveViewerCountEl.textContent = live + (isPeak ? ' 🎆' : '');
            modalLiveCount.textContent = live + (isPeak ? ' 🎆' : '');
        }

        /* ---------- AUDIO ---------- */
        audio.volume = .7;
        function togglePlay(){
            if(audio.paused){
                audio.play().then(()=>{
                    playIcon.className = 'fa-solid fa-pause';
                    playBtn.classList.add('playing');
                    updateStats();
                }).catch(()=>playIcon.className = 'fa-solid fa-times');
            }else{
                audio.pause();
                playIcon.className = 'fa-solid fa-circle-play';
                playBtn.classList.remove('playing');
            }
        }
        function formatTime(sec){
            const m = Math.floor(sec/60), s = Math.floor(sec%60);
            return `${m}:${s.toString().padStart(2,'0')}`;
        }
        function skipForward(){audio.currentTime=Math.min(audio.currentTime+10,audio.duration||0)}
        function skipBackward(){audio.currentTime=Math.max(audio.currentTime-10,0)}
        function setProgress(e){
            const r = e.currentTarget.getBoundingClientRect();
            const x = (e.clientX||(e.touches&&e.touches[0].clientX))-r.left;
            const pct = x/r.width;
            if(audio.duration)audio.currentTime=pct*audio.duration;
        }
        audio.addEventListener('timeupdate',()=>{
            if(audio.duration){
                progress.style.width = (audio.currentTime/audio.duration)*100+'%';
                currentTimeEl.textContent = formatTime(audio.currentTime);
                progress.classList.toggle('playing',!audio.paused);
            }
        });
        audio.addEventListener('loadedmetadata',()=>durationEl.textContent=formatTime(audio.duration));
        audio.addEventListener('ended',()=>{
            playIcon.className = 'fa-solid fa-circle-play';
            playBtn.classList.remove('playing');
        });

        /* ---------- SOCIAL SLIDER ---------- */
        let sliderDirection = '', sliderTimeout;
        function updateSliderThumb(){
            const val = +socialSlider.value;
            const rect = socialSlider.getBoundingClientRect();
            sliderThumb.style.left = (val/100)*rect.width+'px';
            if(val<30){
                sliderThumb.classList.add('instagram-mode');sliderThumb.classList.remove('facebook-mode');sliderDirection='instagram';
            }else if(val>70){
                sliderThumb.classList.add('facebook-mode');sliderThumb.classList.remove('instagram-mode');sliderDirection='facebook';
            }else{
                sliderThumb.classList.remove('instagram-mode','facebook-mode');sliderDirection='';
            }
        }
        function openSocialLink(platform){
            if(platform==='instagram')window.open('https://www.instagram.com/quadres_bd','_blank');
            if(platform==='facebook')window.open('https://www.facebook.com/quadres.bd','_blank');
        }
        socialSlider.addEventListener('input',e=>{
            updateSliderThumb();
            clearTimeout(sliderTimeout);
            sliderTimeout=setTimeout(()=>{
                if(+e.target.value<20){openSocialLink('instagram');setTimeout(()=>{socialSlider.value=50;updateSliderThumb()},500);}
                else if(+e.target.value>80){openSocialLink('facebook');setTimeout(()=>{socialSlider.value=50;updateSliderThumb()},500);}
            },300);
        });
        socialSlider.addEventListener('change',()=>{
            if(+socialSlider.value>=20&&+socialSlider.value<=80){socialSlider.value=50;updateSliderThumb();}
        });

        /* ---------- PARTICLES ---------- */
        function createParticles(){
            const container=document.getElementById('particles');
            const count=window.innerWidth<400?6:8;
            for(let i=0;i<count;i++){
                const p=document.createElement('div');p.className='particle';
                p.style.left=Math.random()*100+'%';p.style.top=Math.random()*100+'%';
                p.style.animationDelay=Math.random()*6+'s';p.style.animationDuration=(Math.random()*3+5)+'s';
                container.appendChild(p);
            }
        }
        createParticles();

        /* ---------- MODALS ---------- */
        liveViewerCountEl.addEventListener('click',()=>statsModal.style.display='flex');
        closeStatsModal.addEventListener('click',()=>statsModal.style.display='none');
        statsModal.addEventListener('click',e=>{if(e.target===statsModal)statsModal.style.display='none';});

        // GIFT MODAL HANDLERS
        giftBtn.addEventListener('click',()=>giftModal.style.display='flex');
        closeGiftModal.addEventListener('click',()=>giftModal.style.display='none');
        giftModal.addEventListener('click',e=>{if(e.target===giftModal)giftModal.style.display='none';});

        /* ---------- INIT ---------- */
        window.addEventListener('load',()=>{
            updateSliderThumb();
            updateStats();
            setInterval(updateStats,8000);
        });

        /* ---------- KEYBOARD ---------- */
        document.addEventListener('keydown',e=>{
            if(e.code==='Space'){e.preventDefault();togglePlay()}
            else if(e.code==='ArrowLeft')skipBackward();
            else if(e.code==='ArrowRight')skipForward();
        });

        /* ---------- PREVENT DOUBLE-TAP ZOOM ---------- */
        let lastTouchEnd=0;
        document.addEventListener('touchend',e=>{
            const now=(new Date).getTime();
            if(now-lastTouchEnd<=300)e.preventDefault();
            lastTouchEnd=now;
        },false);
    </script>
</body>
</html>
